<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>–®–†–ò–∫–∞—Ç–æ–Ω - 1</title>
</head>

<body>
  <script>
  const buildMatrix = (inputNumber) => {
    let circularCounter = 1;
    let matrixSideLength = inputNumber;

    // –°—Ç—Ä–æ–∏–º —à–∞–±–ª–æ–Ω –º–∞—Ç—Ä–∏—Ü—ã
    const matrixMap = [];
    for (let i = 0; i <= inputNumber - 1; i++) {
      matrixMap.push([]);
    };

    // –ó–∞–ø–æ–ª–Ω—è–µ–º –∫–∞–∂–¥—É—é —Å—Ç–æ—Ä–æ–Ω—É
    for (let i = 0; i < inputNumber; i++) {
      // –í–µ—Ä—Ö
      for (j = 0; j < matrixSideLength; j++) {
        matrixMap[i][i + j] = circularCounter++;
      }
      // –ü—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞
      for (j = 1; j < matrixSideLength; j++) {
        matrixMap[i + j][inputNumber - 1 - i] = circularCounter++;
      }
      // –ù–∏–∂–Ω—è—è —Å—Ç–æ—Ä–æ–Ω–∞
      for (j = matrixSideLength - 2; j > -1; j--) {
        matrixMap[inputNumber - 1 - i][i + j] = circularCounter++;
      }
      // –õ–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞
      for (j = matrixSideLength - 2; j > 0; j--) {
        matrixMap[i + j][i] = circularCounter++;
      }

      matrixSideLength -= 2;
    };
    return matrixMap;
  };

  const binarySearch = (arr, searchedNumber) => {
    // –ü—Ä–∏–Ω–∏–º–∞–µ–º –Ω–∞ –≤—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –º–∞—Å—Å–∏–≤—ã —Å —Ü–∏—Ñ—Ä–∞–º–∏
    if (arr.some((number) => typeof number === `string`)) {
      throw new Error(`array can contain numbers only`)
    }

    //–£–±–µ–¥–∏–º—Å—è, –∏—Å–∫–æ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ = —á–∏—Å–ª–æ
    if (typeof searchedNumber !== `number`) {
      throw new Error(`can search only for type 'number'`)
    }

    //–£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –º–∞—Å—Å–∏–≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
    for (let i = 0; i < arr.length - 1; i++) {
      if (arr[i] > arr[i + 1]) {
        throw new Error(`arr is not sorted`)
      }
    }

    const findNumberIndex = () => {
      let arrStart = 0;
      let arrEnd = arr.length - 1;

      while (arrEnd >= arrStart) {
        let arrCenter = Math.floor((arrStart + arrEnd) / 2);
        let currentArrCenterNumber = arr[arrCenter];

        if (currentArrCenterNumber === searchedNumber) {
          return arrCenter;
        } else if (currentArrCenterNumber > searchedNumber) {
          arrEnd = arrCenter - 1;
        } else {
          arrStart = arrCenter + 1
        }
      }
      return `not found in arr`;
    }

    return `Searched number ${searchedNumber} is at index ${findNumberIndex()}`;
  }

  const bracketsStringStub = `{ ( [(  ) ] ) }`;
  const checkPairingBrackets = (string) => {
    const pairs = [`[]`, `{}`, `()`];
    let bracketCounter = 0;

    // –í—ã—Ä–µ–∑–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏
    let cleanString = string.replace(/\s/g, '');

    // –ï—Å–ª–∏ —Å–∫–æ–±–æ–∫ –Ω–µ—á–µ—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ - –≤—ã—Ö–æ–¥–∏–º
    if (cleanString.length % 2 !== 0) {
      return `Brackets do not match`;
    }

    while (cleanString) {
      let currentPair = `${cleanString.slice(0,1)}${cleanString.slice(-1)}`;
      if (pairs.includes(currentPair)) {
        cleanString = cleanString.substring(1, cleanString.length - 1);
        bracketCounter++;
      } else {
        return `Brackets do not match`;
      }
    }

    return `Brackets match üëå. Total number of bracket pairs = ${bracketCounter}`;
  }

  console.log(`%c1) –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–ø–∏—Ä–∞–ª—å–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã = %cconsole.table(buildMatrix(n))`, `color: blue`, `color: green`, `
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É —Å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–æ–Ω n/n. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –µ–µ —á–∏—Å–ª–∞–º–∏ –æ—Ç 1 –¥–æ n*n –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ –∫ —Å–µ—Ä–µ–¥–∏–Ω–µ –º–∞—Ç—Ä–∏—Ü—ã`);

  console.log(`%c2) –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ = %cbinarySearch(arr, searchedNumber)`, `color: blue`, `color: green`, `
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–µ–∫—Å –∏—Å–∫–æ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –ø–æ–ø—É—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—è, —á—Ç–æ –º–∞—Å—Å–∏–≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ—á–Ω—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤`);

  console.log(`%c3) –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ —Å–∫–æ–±–æ–∫ –≤ —Å—Ç—Ä–æ–∫–µ = %ccheckPairingBrackets(string)`, `color: blue`, `color: green`, `
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥–∞–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º bracketsStringStub == checkPairingBrackets(bracketsStringStub)`);
  </script>
</body>

</html>
